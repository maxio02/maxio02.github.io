(()=>{"use strict";var t={"./src/Drawer.ts":(t,e,n)=>{n.r(e),n.d(e,{drawArrow:()=>d,drawDot:()=>s,drawGrid:()=>c,drawLasso:()=>u,drawParticles:()=>i,drawTail:()=>a});var r=n("./src/Vec2D.ts"),o=n("./src/script.ts");function i(){o.particles.forEach((function(t){t.draw()}))}function c(){o.back_ctx.clearRect(0,0,o.foreground_canvas.width,o.foreground_canvas.height),o.back_ctx.strokeStyle="rgba(0, 0, 0, 0.1)",o.back_ctx.lineWidth=1;for(var t=o.gridSize;t<o.foreground_canvas.width;t+=o.gridSize)o.back_ctx.beginPath(),o.back_ctx.moveTo(t,0),o.back_ctx.lineTo(t,o.foreground_canvas.height),o.back_ctx.stroke();for(var e=o.gridSize;e<o.foreground_canvas.height;e+=o.gridSize)o.back_ctx.beginPath(),o.back_ctx.moveTo(0,e),o.back_ctx.lineTo(o.foreground_canvas.width,e),o.back_ctx.stroke()}function a(t,e){if(o.clicked&&t.x!=e.x&&t.y!=e.y){var n=e.difference(t);n.divide(10);var i=Math.atan2(e.y-t.y,e.x-t.x),c=new r.default(e.x,e.y);c.x-=Math.cos(i),c.y-=Math.sin(i);for(var a=1;a<=10;a++)s(t.x+n.x*a,t.y+n.y*a,5)}}function s(t,e,n){o.ctx.beginPath(),o.ctx.arc(t,e,n,0,2*Math.PI,!1),o.ctx.fillStyle="#dddddd",o.ctx.fill(),o.ctx.closePath()}function u(){o.clicked&&(o.ctx.beginPath(),o.ctx.arc(o.pointerPosition.x,o.pointerPosition.y,o.fieldSize,0,2*Math.PI),o.ctx.lineWidth=3,o.ctx.strokeStyle="rgba(0, 0, 0, 0.2)",o.ctx.stroke(),o.ctx.closePath())}function d(t,e){if(o.clicked&&t.x!=e.x&&t.y!=e.y){var n=Math.atan2(e.y-t.y,e.x-t.x),i=10,c=new r.default(e.x,e.y);c.x-=11.5*Math.cos(n),c.y-=11.5*Math.sin(n),o.ctx.beginPath(),o.ctx.moveTo(t.x,t.y),o.ctx.lineTo(c.x,c.y),o.ctx.strokeStyle="#bbbbbb",o.ctx.lineWidth=10,o.ctx.stroke(),o.ctx.beginPath(),o.ctx.moveTo(c.x,c.y),o.ctx.lineTo(c.x-i*Math.cos(n-Math.PI/7),c.y-i*Math.sin(n-Math.PI/7)),o.ctx.lineTo(c.x-i*Math.cos(n+Math.PI/7),c.y-i*Math.sin(n+Math.PI/7)),o.ctx.lineTo(c.x,c.y),o.ctx.lineTo(c.x-i*Math.cos(n-Math.PI/7),c.y-i*Math.sin(n-Math.PI/7)),o.ctx.strokeStyle="#bbbbbb",o.ctx.lineWidth=10,o.ctx.stroke(),o.ctx.fillStyle="#bbbbbb",o.ctx.fill(),o.ctx.closePath()}}},"./src/MenuManager.ts":(t,e,n)=>{n.r(e),n.d(e,{closeMenu:()=>a,getPointerFunction:()=>p,openMenu:()=>c});var r=n("./src/script.ts"),o=document.getElementById("menu-button"),i=document.querySelectorAll(".menu-element");function c(){"false"==o.getAttribute("open")&&(o.setAttribute("open","true"),o.style.cursor="auto",i.forEach((function(t){setTimeout((function(){t.style.display="block"}),300)})))}function a(){o.setAttribute("open","false"),o.style.cursor="pointer",i.forEach((function(t){t.style.display="none"}))}o.addEventListener("click",(function(t){t.stopPropagation(),c()}));var s=document.getElementById("field-size-slider"),u=document.getElementById("field-strength-slider"),d=document.getElementById("gravity-strength-slider"),l=document.getElementById("substeps-amount-entry"),h=document.getElementById("particles-amount-entry"),f=document.getElementById("drawOutline");function p(){for(var t=document.getElementsByName("cursor-function"),e=0;e<t.length;e++)if(t[e].checked)return t[e].value}s.oninput=function(){(0,r.setFieldSize)(parseInt(s.value))},u.oninput=function(){(0,r.setFieldStrength)(parseInt(u.value))},d.oninput=function(){(0,r.setGravityStrength)(parseInt(d.value))},l.addEventListener("change",(function(){(0,r.setSubsteps)(parseInt(l.value))})),h.addEventListener("change",(function(){(0,r.setParticlesNum)(parseInt(h.value))})),f.oninput=function(){(0,r.setDrawOutline)(f.checked)}},"./src/Particle.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>i});var r=n("./src/Vec2D.ts"),o=n("./src/script.ts");const i=function(){function t(t,e,n,r){this.pos_curr=t,this.pos_prev=this.pos_curr,this.radius=e,this.acceleration=n,this.color=r}return t.prototype.draw=function(){var e=this.pos_curr.x,n=this.pos_curr.y;t.ctx.beginPath(),t.ctx.arc(e,n,this.radius,0,2*Math.PI,!1),t.ctx.fillStyle=this.color,t.ctx.fill(),o.drawOutline&&(t.ctx.lineWidth=2,t.ctx.strokeStyle="black",t.ctx.stroke()),t.ctx.closePath()},t.prototype.updatePosition=function(t){var e=new r.default(this.pos_curr.x-this.pos_prev.x,this.pos_curr.y-this.pos_prev.y);this.pos_prev=this.pos_curr.clone(),this.pos_curr.add(e),this.acceleration.multiply(t*t),this.pos_curr.add(this.acceleration),this.acceleration.x=0,this.acceleration.y=0},t.prototype.accelerate=function(t){this.acceleration.add(t)},t.canvas=document.getElementById("foreground-canvas"),t.ctx=t.canvas.getContext("2d"),t}()},"./src/Vec2D.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});const r=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.add=function(t){this.x+=t.x,this.y+=t.y},t.prototype.subtract=function(t){this.x-=t.x,this.y-=t.y},t.prototype.multiply=function(t){this.x*=t,this.y*=t},t.prototype.divide=function(t){this.x/=t,this.y/=t},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.difference=function(e){return new t(this.x-e.x,this.y-e.y)},t}()},"./src/script.ts":(t,e,n)=>{n.r(e),n.d(e,{back_ctx:()=>m,clicked:()=>P,ctx:()=>_,drawOutline:()=>v,fieldSize:()=>g,foreground_canvas:()=>y,gravity:()=>p,grid:()=>s,gridSize:()=>a,particles:()=>u,pointerPosition:()=>l,setDrawOutline:()=>L,setFieldSize:()=>I,setFieldStrength:()=>S,setGravityStrength:()=>B,setParticlesNum:()=>C,setSubsteps:()=>T});var r=n("./src/Drawer.ts"),o=n("./src/MenuManager.ts"),i=n("./src/Particle.ts"),c=n("./src/Vec2D.ts"),a=30,s=[],u=[],d=100,l=new c.default(0,0),h=new c.default(0,0),f="field",p=new c.default(0,1),y=document.getElementById("foreground-canvas"),x=document.getElementById("background-canvas"),g=100,v=!0,w=10,b=4;y.width=y.getBoundingClientRect().width,y.height=y.getBoundingClientRect().height,x.width=x.getBoundingClientRect().width,x.height=x.getBoundingClientRect().height;var _=i.default.canvas.getContext("2d"),m=x.getContext("2d"),M=60,P=!1,k=document.createElement("div");k.style.position="absolute",k.style.top="10px",k.style.left="10px",k.style.color="black";var E=document.createElement("div");function S(t){w=t}function I(t){g=t}function B(t){p=new c.default(0,t/10)}function T(t){b=t}function C(t){d=t}function L(t){v=t}function z(){for(var t=Math.ceil(y.width/a),e=Math.ceil(y.height/a),n=0;n<t;n++){s[n]=[];for(var r=0;r<e;r++)s[n][r]=[]}}function O(t){u.forEach((function(e){!function(t){var e=Math.floor(t.pos_curr.x/a),n=Math.floor(t.pos_curr.y/a);if(e>=0&&e<s.length&&n>=0&&n<s[e].length){var r=s[e][n],o=r.indexOf(t);-1!==o&&r.splice(o,1)}}(e),e.updatePosition(t),function(t){var e=Math.floor(t.pos_curr.x/a),n=Math.floor(t.pos_curr.y/a);e>=0&&e<s.length&&n>=0&&n<s[e].length&&s[e][n].push(t)}(e)}))}function R(t){u.forEach((function(e){var n=t.difference(e.pos_curr),r=n.length();r<g&&r>10&&(n.multiply(100*w),n.divide(r*r),e.accelerate(n))}))}E.style.position="absolute",E.style.top="30px",E.style.left="10px",E.style.color="black",document.body.appendChild(k),document.body.appendChild(E);var D=0,F=performance.now()/10;function A(t){t.stopPropagation(),P=!0,f=(0,o.getPointerFunction)(),t instanceof MouseEvent?(l.x=t.clientX,l.y=t.clientY):t instanceof TouchEvent&&(l.x=t.touches[0].clientX,l.y=t.touches[0].clientY),h.x=l.x,h.y=l.y}function G(t){switch(t.stopPropagation(),P=!1,f){case"field":case"gravity":break;case"throw":var e=h.difference(l);e.multiply(M/60),u.push(new i.default(h.clone(),15,e,W()))}}function W(){var t=Math.floor(256*Math.random()),e=Math.floor(256*Math.random()),n=Math.floor(256*Math.random());return"rgb(".concat(t,", ").concat(e,", ").concat(n,")")}function j(t){t.stopPropagation(),P&&(t instanceof MouseEvent?(l.x=t.clientX,l.y=t.clientY):t instanceof TouchEvent&&(l.x=t.touches[0].clientX,l.y=t.touches[0].clientY))}var q=0,V=document.getElementById("main_container");window.addEventListener("resize",(function(){y.width=y.getBoundingClientRect().width,y.height=y.getBoundingClientRect().height,x.width=x.getBoundingClientRect().width,x.height=x.getBoundingClientRect().height,z(),(0,r.drawGrid)()})),V.addEventListener("mousedown",A),V.addEventListener("mouseup",G),V.addEventListener("mousemove",j),V.addEventListener("touchstart",A),V.addEventListener("touchend",G),V.addEventListener("touchmove",j),V.addEventListener("click",(function(t){t.stopPropagation(),(0,o.closeMenu)()})),z(),(0,r.drawGrid)(),requestAnimationFrame((function t(){switch(function(t){for(var e=b,n=t/e,r=0;r<e;r++){if(0!=p.y&&u.forEach((function(t){t.accelerate(p)})),P)switch(f){case"field":R(l);break;case"gravity":(p=l.difference(h)).divide(200)}u.forEach((function(t){t.pos_curr.y+t.radius>y.height&&(t.pos_curr.y=y.height-t.radius,t.pos_prev.y=t.pos_curr.y+t.pos_curr.y-t.pos_prev.y),t.pos_curr.y-t.radius<0&&(t.pos_curr.y=t.radius,t.pos_prev.y=t.pos_curr.y+t.pos_curr.y-t.pos_prev.y),t.pos_curr.x-t.radius<0&&(t.pos_curr.x=t.radius,t.pos_prev.x=t.pos_curr.x+t.pos_curr.x-t.pos_prev.x),t.pos_curr.x+t.radius>y.width&&(t.pos_curr.x=y.width-t.radius,t.pos_prev.x=t.pos_curr.x+t.pos_curr.x-t.pos_prev.x)})),u.forEach((function(t){(function(t){for(var e=Math.floor(t.pos_curr.x/a),n=Math.floor(t.pos_curr.y/a),r=[],o=e-1;o<=e+1;o++)for(var i=n-1;i<=n+1;i++)o>=0&&o<s.length&&i>=0&&i<s[o].length&&r.push.apply(r,s[o][i]);return r})(t).forEach((function(e){var n=t.pos_curr.difference(e.pos_curr),r=n.length();if(0!=r&&r<t.radius+e.radius){n.divide(r);var o=t.radius+e.radius-r;n.multiply(.5*o),t.pos_curr.add(n),e.pos_curr.subtract(n)}}))})),O(n)}}(.5/M*60),_.clearRect(0,0,y.width,y.height),(0,r.drawParticles)(),f){case"field":(0,r.drawLasso)();break;case"gravity":(0,r.drawArrow)(h,l);break;case"throw":(0,r.drawTail)(h,l)}var e=M/60;q%Math.floor(8*e)==0&&u.length<d&&(u.push(new i.default(new c.default(200,200),15,new c.default(100*e,-150*e),W())),u.push(new i.default(new c.default(200,260),15,new c.default(90*e,-150*e),W())),u.push(new i.default(new c.default(200,320),15,new c.default(85*e,-150*e),W())),u.push(new i.default(new c.default(200,380),15,new c.default(90*e,-150*e),W())),u.push(new i.default(new c.default(200,440),15,new c.default(85*e,-150*e),W()))),q++,++D%10==0&&(M=function(){var t=performance.now()/10,e=t-F,n=Math.round(1e3/e);return F=t,n}(),k.innerText="FPS: ".concat(M),E.innerText="Particles: ".concat(u.length)),requestAnimationFrame(t)}))}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n("./src/script.ts"),n("./src/MenuManager.ts")})();